# フォームの作成
このパートでは、ユーザ登録で利用するフォームを作成していきます。

## ユーザ登録フォームの作成
DjangoではUserCreationFormクラスという、ユーザ作成に特化したクラスが用意されているので、このクラスを継承して利用することにしましょう。

アプリフォルダ内のforms.pyを修正していきます。
```
amazon/
　├ static/
　├ fixtures/
　├ __init__.py
　├ apps.py
　├ models.py
　├ forms.py ← 修正
　├ views.py　
　├ admin.py
　├ migrations/
　└ test.py
```

forms.pyに以下を追加しましょう。
```
〜略〜
class SignUpForm(UserCreationForm):
    """ユーザー登録用フォーム"""

    class Meta:
        model = User
        fields = ('email', 'name',)
        
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        for field in self.fields.values():
            field.required = True
            field.widget.attrs['class'] = 'form-control'
            field.widget.attrs['placeholder'] = field.label  # placeholderにフィールドのラベルを入れる

```

Metaクラスにて利用する認証ユーザのクラスを指定し、fieldsにはユーザに入力させる項目を指定します。

前述したように、AuthenticationFormクラスを継承して作成しています。AuthenticationFormは、usernameとパスワードでの認証を実装してくれているクラスであり、ここでいうusernameは利用する認証ユーザのUSERNAME_FIELDプロパティ(すなわち今回のカスタムユーザではメールアドレス)を指しております。基本的な挙動はすでに実装されているものをそのまま利用しますが、初期化処理のみ少しカスタマイズしております。`__init__`関数では、各フィールドからHTMLフォームを生成する際に指定する属性値を指定しており、クラスにはbootstrapのform-control、placeholderにはフィールドのラベル(verbose_name)を指定しております。

## サインアップフォームの作成
ログインフォーム同様、こちらはAuthenticationFormクラスを継承しております。
forms.pyに以下を追記しましょう。

forms.py
```
〜略〜
class SignUpForm(UserCreationForm): # 追加
    """ユーザー登録用フォーム"""

    class Meta:
        model = User
        fields = ('email', 'name',)
        
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        for field in self.fields.values():
            field.required = True
            field.widget.attrs['class'] = 'form-control'
            field.widget.attrs['placeholder'] = field.label  # placeholderにフィールドのラベルを入れる
```
こちらもUserCreationFormというDjangoが用意しているクラスを継承しております。Metaクラスでは認証ユーザのクラスと、登録時に記入させるフィールドのリストを指定しており、`__init__`関数ではLoginFormと同様です。

以上で今回のパートは終了です。

お疲れ様でした。
