# ビューの作成
このパートではログイン用のビューとログアウト用のビューを汎用ビューを用いて作成していきます。

# LoginView
DjangoではLoginViewなる汎用クラスビューが用意されており、こちらを用いて簡単にログイン画面のビューを作成することが可能です。

ではviews.pyに追記をしましょう。
```
amazon/
　├ static/
　├ __init__.py
　├ apps.py
　├ models.py
　├ views.py　←　このファイルを修正します。
　├ admin.py
　├ migrations/
　└ test.py
```
views.pyの最後に以下のコードを追記しましょう。

```
～ 略 ～
from django.contrib.auth.views import LoginView, LogoutView
from .forms import * 
～ 略 ～
class Login(LoginView):
    """ログインページ"""
    form_class = LoginForm
    template_name = 'amazon/login.html'

```

ここでは、LoginクラスをdjangoのLoginViewのサブクラスとして定義しており、前パートで作成したテンプレートファイルをtemplate_nameにて指定しております。またformプロパティにはログインフォームとして使用するフォームクラス(先ほど作成したLoginForm)を指定します。

これでログイン画面のビューは完成です。

## LogoutView
ログインビューと同様、views.pyにログアウトビューを追記します。
ログアウトビューもLogoutViewという汎用ビューが用意されているので、そちらを継承して独自ビューの作成を行います。

```
～ 略 ～
from django.contrib.auth.mixins import LoginRequiredMixin
～ 略 ～
class Logout(LoginRequiredMixin, LogoutView):
    """ログアウトページ"""
    template_name = 'amazon/lp.html'

```

指定しているのはテンプレートのみで、ランディングページのテンプレートを指定しております。
ログアウト処理は内部で実装されているので、ログアウト後にどのテンプレートを返すのかだけを指定しております。

またLogoutViewを継承してと言いましたが、LogoutViewのみでなくLoginRequiredMixinというクラスも継承しております。
このMixin(ミックスイン)とは言葉の通り、ある機能をクラスに付与したい場合に、継承してやることでその機能を独自クラスに簡単に組み込む(ミックスイン)することが可能になります。
今回の場合ではLoginRequiredMixinというそのビューを「ログインしていないと利用できないように制限する」機能を組み込んでおります。

以上で今回のパートは終了です。

お疲れ様でした。


