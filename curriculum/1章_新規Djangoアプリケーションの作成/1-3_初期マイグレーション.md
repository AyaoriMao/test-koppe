# マイグレーション

## マイグレーションとは
migrationsを直訳すると「移行」という意味になります。Djangoでは、モデルと呼ばれるユーザーが設計したデータ構造をもとに、自動的にデータベースのスキーマに変更する機能を提供しており、このモデルに記載したプログラムをもとに実際にデータベースの構造を変更することを「マイグレーション」と呼びます。
マイグレーションは2つのステップから構成されます。
* STEP 1 マイグレーションファイルの作成
  * マイグレーションファイルとは、私たちが書いたプログラムをもとにdjangoが作成するデータベースに対する指示書のようなものです。モデル部分のプログラムを修正したら、このマイグレーションファイルの作成を行いましょう。
* STEP 2 マイグレーションの実行
  * 上記で作成したマイグレーションファイルを実際に実行して、データベースのスキーマを変更することを指します。


全パートでサーバを立ち上げた際に以下の様なメッセージが出たと思います。上記のSTEP 1でマイグレーションファイルを作成したけど、データベースに反映していないと、このようなメッセージが出ます。
え？まだ何も書いてないよ、と思うかもしれませんが、記載されているadmin, auth, ・・・ というアプリは、djangoがデフォルトで用意しているアプリであり、そのアプリ内で勝手に初期マイグレーションファイルが作成されているためこのようなメッセージが出てきます。
```
You have 17 unapplied migration(s).・・・
apply the migrations for app(s): admin, auth, contenttypes, sessions
```

それでは実際に上記で指摘されているマイグレーションを行いましょう。
manage.pyがあるフォルダに移動し、以下のコマンドを打ちましょう。

```
(myenv)$ python manage.py migrate
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  ・・・
```
上記のような出力になれば成功です。
用意されているマイグレーションファイルがそれぞれ適用されていき、データベースに反映されます。

